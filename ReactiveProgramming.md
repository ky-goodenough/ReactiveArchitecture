## Reactive Programming

リアクティブシステムやリアクティブアーキテクチャを研究しているときに、リアクティブプログラミングという別の用語をよく目にすると思います。
リアクティブシステムやリアクティブアーキテクチャとリアクティブプログラミングの違いを理解することは重要です。
よく誤解されていますが、実際には等価ではありません。リアクティブシステムは、アーキテクチャレベルでリアクティブ原則を適用します。この図を見てください。この青いボックスはマイクロサービスを表しています。赤い矢印のついた microservices というラベルを見ればわかります。これらのマイクロサービスはリアクティブシステムを表しています。これらはアーキテクチャレベルでリアクティブになるように設計されています。
これらのマイクロサービスの中、青いボックスの中には、フューチャー、リアクティブストリーム、RxJava、RxScalaなどのボックスがあります。
これらはすべてリアクティブプログラミングのテクニックです。ここでの違いは、リアクティブプログラミングはリアクティブシステムを構築するために使うことができ、リアクティブシステムを構築するためによく使われますが、リアクティブプログラミングを使ったからといって、リアクティブシステムを作ったことにはなりません。なので、その違いを理解しておくことが大切です。リアクティブプログラミングを使ったからといって、自動的にリアクティブシステムを構築したことになるわけではありません。また、リアクティブアーキテクチャの原則を使っていることを自動的に意味するわけでもありません。では、それぞれについてもう少し詳しく掘り下げてみましょう。では、リアクティブシステムやリアクティブアーキテクチャとは何か？これまでに議論してきたReactive Manifestoの原則は、Reactive Systemsの設計とアーキテクチャに本質的なものです。
リアクティブシステムを構築するときには、リアクティブマニフェストのアーキテクチャ原則を使用します。これは、すべての主要なアーキテクチャコンポーネントがリアクティブな方法で相互作用することを意味します。そして、主要なアーキテクチャコンポーネントについて話しているとき、私たちはしばしばマイクロサービスについて話しています。つまり、私たちのマイクロサービスはリアクティブな方法で相互にやりとりすることになります。メッセージ駆動の原則に従うことになります。また、弾力性があり、回復力があり、応答性があることを確認します。
私たちは、リアクティブシステムでこれらすべてのことを達成しようとしています。これを実現するためには、リアクティブシステムを非同期の境界に沿って分離する必要があります。主要なアーキテクチャコンポーネントはリアクティブな方法で相互作用しなければならないことを覚えておいてください。リアクティブであるということは、メッセージ駆動であることを意味し、メッセージ駆動であるということは、非同期のメッセージと通信していることを意味します。そのため、リアクティブシステムやマイクロサービスは、そのメッセージを使って非同期に通信しなければならず、その結果、非同期の境界線ができてしまいます。つまり、リアクティブなマイクロサービスはリアクティブシステムを使って構築されたものの一例です。
一方、リアクティブプログラミングはリアクティブシステムの構築をサポートするために使用することができます。リアクティブプログラミングが一般的に行うことは、未来やストリームなどを見ているときに、問題を小さな離散的なステップに分解することです。それらの個々のステップは非同期ノンブロッキングで実行されますが、通常は何らかのコールバック機構を使って実行されます。ScalaではFuturesやPromisesがその例です。JavaではCompletableFuturesがありますが、これも似たような概念です。また、Reactive StreamsやAkka Streamsなどのストリームもあります。
RxJavaやRxScalaのようなものがあります。しかし、もう一度強調しておきますが、リアクティブプログラミングを使っているシステムが必ずしもリアクティブであるとは限りません。
ここで少し疑問が生じます。リアクティブプログラミングの技術を使って、どうやってリアクティブではないシステムを構築するのでしょうか？実はそれはとても簡単なことです。
システムを構築して、それを一つのノードにデプロイするだけです。もしそれが1つのノードにデプロイされていたら、それが回復力を持つ方法はありません。そのノードがクラッシュした場合、システム全体を失うことになるので、その時点ですべての回復力を失うことになります。
また、弾力性を持たせることができないような方法で構築することは非常に簡単です。例えば。ローカルキャッシュを利用するように構築し、複数のノードと同期してローカルキャッシュを維持する方法がない場合、その時点でスケールアップが非常に困難になります。先物であれ、ストリームであれ、何であれ、リアクティブプログラミングツールを使って、リアクティブシステムの基準を満たしていないシステムを構築するには、このような方法があります。
リアクティブ・アーキテクチャーを念頭に
